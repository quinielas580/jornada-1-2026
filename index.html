<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Quiniela La Perrona</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        :root {
            --yellow: #ffcc00;
            --dark: #1a1a1a;
            --red: #b30000;
            --whatsapp-green: #25D366;
            --row-selected: #332b00;
        }

        html, body {
            margin: 0; padding: 0; background: #000; width: 100%; height: 100%; overflow-x: hidden;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif; color: #fff; display: flex; justify-content: center; align-items: center; padding: 5px;
        }

        .wrapper {
            width: 95%; max-width: 420px; background: var(--dark); border: 2px solid var(--yellow); 
            border-radius: 12px; padding: 12px; box-sizing: border-box; display: flex; 
            flex-direction: column; min-height: 95vh; justify-content: flex-start;
        }

        .title {
            background: var(--red); border: 1px solid var(--yellow); text-align: center; font-size: 18px; 
            font-weight: bold; padding: 10px; margin-bottom: 12px; text-transform: uppercase; border-radius: 4px;
        }

        .field { display: grid; grid-template-columns: 80px 1fr; margin-bottom: 8px; align-items: center; }
        .field label { color: var(--yellow); font-weight: bold; font-size: 13px; }
        .field input {
            background: rgba(255,255,255,0.05); border: 1px solid var(--yellow); color: #fff; 
            padding: 8px; border-radius: 4px; font-size: 15px; width: 100%; box-sizing: border-box; outline: none;
        }

        .table { border: 1px solid var(--yellow); width: 100%; box-sizing: border-box; margin-bottom: 15px; border-radius: 4px; overflow: hidden; }
        .header, .row { display: grid; grid-template-columns: 40px 1fr 40px 1fr 40px; }

        .cell {
            padding: 10px 2px; border-right: 1px solid rgba(255, 204, 0, 0.3); border-bottom: 1px solid rgba(255, 204, 0, 0.3); 
            display: flex; align-items: center; font-size: 11px; transition: background 0.3s;
        }

        .header .cell { background: #333; color: var(--yellow); font-size: 16px; font-weight: bold; justify-content: center; border-bottom: 2px solid var(--yellow); }
        .cell-local { justify-content: flex-start; padding-left: 6px; font-weight: bold; font-size: 11px; text-transform: uppercase; }
        .cell-visita { justify-content: flex-end; padding-right: 6px; font-weight: bold; font-size: 11px; text-transform: uppercase; text-align: right; }

        .cell.radio { justify-content: center; }
        .cell.radio input[type="radio"] { transform: scale(1.6); cursor: pointer; margin: 0; accent-color: var(--yellow); }

        .row:has(input:checked) { background: var(--row-selected); }

        .submit {
            margin-top: auto; background: var(--yellow); color: #000; padding: 15px; text-align: center; 
            font-weight: 800; cursor: pointer; border: none; border-radius: 6px; text-transform: uppercase; font-size: 16px; width: 100%;
        }

        .submit:disabled { opacity: 0.6; cursor: not-allowed; }

        .btn-whatsapp {
            margin-top: 15px; background: var(--whatsapp-green); color: white !important; padding: 18px; 
            text-align: center; font-weight: bold; border-radius: 8px; display: flex; align-items: center; 
            justify-content: center; gap: 10px; text-decoration: none; width: 100%; box-sizing: border-box; font-size: 16px;
        }

        .hidden { display: none !important; }
        .btn-otra { background: #444; color: #fff; margin-bottom: 10px; }
        .btn-salir { background: var(--red); color: #fff; }
    </style>
</head>

<body>
<div class="wrapper">
    <form id="quinielaForm">
        <div class="title">QUINIELA LA PERRONA</div>
        
        <div class="field"><label>Nombre</label><input name="nombre" placeholder="Nombre completo" required></div>
        <div class="field"><label>Tel√©fono</label><input type="tel" name="telefono" placeholder="WhatsApp" required></div>
        <div class="field"><label>C√≥digo</label><input name="codigo" placeholder="Tu c√≥digo" required></div>

        <div class="table">
            <div class="header">
                <div class="cell">L</div>
                <div class="cell" style="font-size: 10px; justify-content: center;">LOCAL</div>
                <div class="cell">E</div>
                <div class="cell" style="font-size: 10px; justify-content: center;">VISITA</div>
                <div class="cell">V</div>
            </div>
            
            <div class="row" data-local="ATLAS" data-visitante="PUEBLA"><div class="cell radio"><input type="radio" name="p1" value="L" required></div><div class="cell cell-local">ATLAS</div><div class="cell radio"><input type="radio" name="p1" value="E"></div><div class="cell cell-visita">PUEBLA</div><div class="cell radio"><input type="radio" name="p1" value="V"></div></div>
            <div class="row" data-local="MAZATL√ÅN" data-visitante="JU√ÅREZ"><div class="cell radio"><input type="radio" name="p2" value="L" required></div><div class="cell cell-local">MAZATL√ÅN</div><div class="cell radio"><input type="radio" name="p2" value="E"></div><div class="cell cell-visita">JU√ÅREZ</div><div class="cell radio"><input type="radio" name="p2" value="V"></div></div>
            <div class="row" data-local="TIJUANA" data-visitante="AM√âRICA"><div class="cell radio"><input type="radio" name="p3" value="L" required></div><div class="cell cell-local">TIJUANA</div><div class="cell radio"><input type="radio" name="p3" value="E"></div><div class="cell cell-visita">AM√âRICA</div><div class="cell radio"><input type="radio" name="p3" value="V"></div></div>
            <div class="row" data-local="CHIVAS" data-visitante="PACHUCA"><div class="cell radio"><input type="radio" name="p4" value="L" required></div><div class="cell cell-local">CHIVAS</div><div class="cell radio"><input type="radio" name="p4" value="E"></div><div class="cell cell-visita">PACHUCA</div><div class="cell radio"><input type="radio" name="p4" value="V"></div></div>
            <div class="row" data-local="LE√ìN" data-visitante="CRUZ AZUL"><div class="cell radio"><input type="radio" name="p5" value="L" required></div><div class="cell cell-local">LE√ìN</div><div class="cell radio"><input type="radio" name="p5" value="E"></div><div class="cell cell-visita">CRUZ AZUL</div><div class="cell radio"><input type="radio" name="p5" value="V"></div></div>
            <div class="row" data-local="SANTOS" data-visitante="NECAXA"><div class="cell radio"><input type="radio" name="p6" value="L" required></div><div class="cell cell-local">SANTOS</div><div class="cell radio"><input type="radio" name="p6" value="E"></div><div class="cell cell-visita">NECAXA</div><div class="cell radio"><input type="radio" name="p6" value="V"></div></div>
            <div class="row" data-local="MONTERREY" data-visitante="TOLUCA"><div class="cell radio"><input type="radio" name="p7" value="L" required></div><div class="cell cell-local">MONTERREY</div><div class="cell radio"><input type="radio" name="p7" value="E"></div><div class="cell cell-visita">TOLUCA</div><div class="cell radio"><input type="radio" name="p7" value="V"></div></div>
            <div class="row" data-local="PUMAS" data-visitante="QUER√âTARO"><div class="cell radio"><input type="radio" name="p8" value="L" required></div><div class="cell cell-local">PUMAS</div><div class="cell radio"><input type="radio" name="p8" value="E"></div><div class="cell cell-visita">QUER√âTARO</div><div class="cell radio"><input type="radio" name="p8" value="V"></div></div>
            <div class="row" data-local="SAN LUIS" data-visitante="TIGRES"><div class="cell radio"><input type="radio" name="p9" value="L" required></div><div class="cell cell-local">SAN LUIS</div><div class="cell radio"><input type="radio" name="p9" value="E"></div><div class="cell cell-visita">TIGRES</div><div class="cell radio"><input type="radio" name="p9" value="V"></div></div>
        </div>
        
        <button type="submit" class="submit" id="btnGuardar">GUARDAR RESPUESTAS</button>
    </form>

    <div id="final" class="hidden" style="text-align:center;">
        <div class="title" style="background: #D4AF37; color: black;">üçÄ ¬°MUCHA SUERTE! üçÄ</div>
        <p style="font-size: 15px; margin: 20px 0;">¬°Datos guardados! Haz clic para enviar el comprobante.</p>
        <div class="btn-whatsapp" onclick="enviarWhats()">
            <i class="fab fa-whatsapp"></i> ENVIAR POR WHATSAPP
        </div>
    </div>

    <div id="agradecimiento" class="hidden" style="text-align:center;">
        <div class="title">‚úÖ REGISTRO COMPLETO</div>
        <p style="font-size: 16px; margin-bottom: 20px;">¬°Gracias por participar!</p>
        <div class="submit btn-otra" onclick="reiniciar()">ENVIAR OTRA</div>
        <div class="submit btn-salir" onclick="salir()">SALIR</div>
    </div>
</div>

<script>
let mensajeWhats = "";

document.getElementById("quinielaForm").addEventListener("submit", function(e) {
    e.preventDefault();
    guardar();
});

function guardar() {
    const form = document.getElementById("quinielaForm");
    const btnSubmit = document.getElementById("btnGuardar");
    
    btnSubmit.innerText = "GUARDANDO..."; 
    btnSubmit.disabled = true;

    let data = { 
        nombre: form.nombre.value.toUpperCase(), 
        telefono: form.telefono.value, 
        codigo: form.codigo.value.toUpperCase() 
    };

    mensajeWhats = `üèÜ *QUINIELA LA PERRONA*\n\n`;
    mensajeWhats += `üë§ *Nombre:* ${data.nombre}\n`;
    mensajeWhats += `üìû *Tel:* ${data.telefono}\n`;
    mensajeWhats += `üîê *C√≥digo:* ${data.codigo}\n\n`;
    mensajeWhats += `*PRON√ìSTICOS:*\n`;

    document.querySelectorAll(".row").forEach((r, i) => {
        const local = r.dataset.local;
        const vis = r.dataset.visitante;
        const sel = r.querySelector("input:checked").value;
        const res = sel === "L" ? local : sel === "E" ? "Empate" : vis;
        
        data["h" + (i + 1)] = `${local} VS ${vis}`; 
        data["p" + (i + 1)] = res;
        mensajeWhats += `${i+1}. ${local} vs ${vis} -> *${res}*\n`;
    });

    // URL ACTUALIZADA
    const url = "https://script.google.com/macros/s/AKfycbwRnNo-2bgZeOZlifsWwjOlLEyMRSw02TFwmVP53YL9TSjoQwxRCmKLFD085pjNeTJg/exec";

    fetch(url, { 
        method: "POST", 
        mode: "no-cors", 
        body: JSON.stringify(data) 
    }).then(() => {
        form.classList.add("hidden"); 
        document.getElementById("final").classList.remove("hidden");
    }).catch(err => {
        alert("Error al guardar. Revisa tu conexi√≥n.");
        btnSubmit.innerText = "GUARDAR RESPUESTAS";
        btnSubmit.disabled = false;
    });
}

function enviarWhats() {
    const tel = "5214423774943";
    window.open(`https://wa.me/${tel}?text=${encodeURIComponent(mensajeWhats)}`, "_blank");
    document.getElementById("final").classList.add("hidden"); 
    document.getElementById("agradecimiento").classList.remove("hidden");
}

function reiniciar() { location.reload(); }
function salir() { window.location.href = "https://www.google.com"; }
</script>
</body>
</html>